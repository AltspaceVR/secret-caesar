var SecretHitler = (function () {
'use strict';

var AssetManager = { 
	manifest: {
		models: {
			board: 'model/table.dae',
			tophat: 'model/tophat.dae',
			visorcap: 'model/visor_cap.dae'
		},
		textures: {
			board_large: 'img/board-large-baked.png',
			board_med: 'img/board-medium-baked.png',
			board_small: 'img/board-small-baked.png',
			cards: 'img/cards.png'
		}
	},
	cache: {}
};

// enum constants
var Types = Object.freeze({
	POLICY_LIBERAL: 0,
	POLICY_FASCIST: 1,
	ROLE_LIBERAL: 2,
	ROLE_FASCIST: 3,
	ROLE_HITLER: 4,
	PARTY_LIBERAL: 5,
	PARTY_FASCIST: 6,
	JA: 7,
	NEIN: 8,
	BLANK: 9
});

function dimsToUV(ref)
{
	var side = ref.side;
	var left = ref.left;
	var right = ref.right;
	var top = ref.top;
	var bottom = ref.bottom;

	if(side)
		{ return [[
			new THREE.Vector2(top, left),
			new THREE.Vector2(bottom, left),
			new THREE.Vector2(top, right)
		],[
			new THREE.Vector2(bottom, left),
			new THREE.Vector2(bottom, right),
			new THREE.Vector2(top, right)
		]]; }
	else
		{ return [[
			new THREE.Vector2(left, top),
			new THREE.Vector2(left, bottom),
			new THREE.Vector2(right, top)
		],[
			new THREE.Vector2(left, bottom),
			new THREE.Vector2(right, bottom),
			new THREE.Vector2(right, top)
		]]; }
}

function getUVs(type)
{
	var dims = {left: 0, right: 1, bottom: 0, top: 1};

	switch(type)
	{
	case Types.POLICY_LIBERAL:
		dims = {side: true, left: 0.834, right: 0.996, top: 0.754, bottom: 0.997};
		break;
	case Types.POLICY_FASCIST:
		dims = {side: true, left: 0.66, right: 0.822, top: 0.754, bottom: 0.996};
		break;
	case Types.ROLE_LIBERAL:
		dims = {left: 0.505, right: 0.746, top: 0.996, bottom: 0.65};
		break;
	case Types.ROLE_FASCIST:
		dims = {left: 0.505, right: 0.746, top: 0.645, bottom: 0.3};
		break;
	case Types.ROLE_HITLER:
		dims = {left: 0.754, right: 0.996, top: 0.645, bottom: 0.3};
		break;
	case Types.PARTY_LIBERAL:
		dims = {left: 0.255, right: 0.495, top: 0.996, bottom: 0.65};
		break;
	case Types.PARTY_FASCIST:
		dims = {left: 0.255, right: 0.495, top: 0.645, bottom: 0.3};
		break;
	case Types.JA:
		dims = {left: 0.005, right: 0.244, top: 0.992, bottom: 0.653};
		break;
	case Types.NEIN:
		dims = {left: 0.006, right: 0.243, top: 0.642, bottom: 0.302};
		break;
	case Types.BLANK:
	default:
		dims = {side: true, left: 0.022, right: .022+0.247, top: 0.021, bottom: .021+0.3543};
		break;
	}

	console.log(dims);
	return dimsToUV(dims);
}


var Card = (function (superclass) {
	function Card(type, doubleSided, secret)
	{
		if ( type === void 0 ) type = Types.BLANK;
		if ( doubleSided === void 0 ) doubleSided = true;
		if ( secret === void 0 ) secret = false;

		superclass.call(this);

		// create the card faces
		var front = new THREE.Mesh(
			new THREE.PlaneGeometry(.3575, .5),
			new THREE.MeshBasicMaterial({map: AssetManager.cache.textures.cards})
		);
		var back = new THREE.Mesh(
			new THREE.PlaneGeometry(.3575, .5),
			new THREE.MeshBasicMaterial({map: AssetManager.cache.textures.cards})
		);
		back.position.set(0.005, 0, 0);
		back.rotateY(Math.PI);

		// set the faces to the correct part of the texture
		front.geometry.faceVertexUvs = [getUVs(type)];
		back.geometry.faceVertexUvs = [getUVs( doubleSided ? type : Types.BLANK )];

		window.test = front;

		this.add(front, back);
	}

	if ( superclass ) Card.__proto__ = superclass;
	Card.prototype = Object.create( superclass && superclass.prototype );
	Card.prototype.constructor = Card;

	return Card;
}(THREE.Object3D));

var HitlerRoleCard = (function (Card) {
	function HitlerRoleCard(secret){
		if ( secret === void 0 ) secret = false;

		Card.call(this, Types.ROLE_HITLER, false, secret);
	}

	if ( Card ) HitlerRoleCard.__proto__ = Card;
	HitlerRoleCard.prototype = Object.create( Card && Card.prototype );
	HitlerRoleCard.prototype.constructor = HitlerRoleCard;

	return HitlerRoleCard;
}(Card));

var secrethitler = {
	assets: AssetManager.manifest,
	initialize: function (env, root, assets) {

		// set root to the tabletop (1m from floor)
		var halfHeight = env.innerHeight/(2*env.pixelsPerMeter);
		root.position.setY(-halfHeight);

		// populate the shared asset cache
		AssetManager.cache = assets;

		// create the table
		var table = assets.models.board;
		var mat = new THREE.MeshBasicMaterial({ map: assets.textures.board_large });
		table.children[0].material = mat;
		table.rotation.set(-Math.PI/2, 0, 0);
		table.position.set(0, 0.75, 0);
		root.add(table);

		// create test card
		var c = new HitlerRoleCard();
		c.translateY(1.3);
		root.add(c);

		var hat = assets.models.tophat;
		hat.position.set(0.5, 1.3, 0);
		hat.rotation.set(-Math.PI/2, 0, 0);
		root.add(hat);
		
		var hat2 = assets.models.visorcap;
		hat2.position.set(-0.5, 1.3, 0);
		hat2.rotation.set(-Math.PI/2, 0, 0);
		root.add(hat2);
	},

};

return secrethitler;

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hc3NldHMuanMiLCIuLi8uLi9zcmMvY2FyZC5qcyIsIi4uLy4uL3NyYy9zZWNyZXRoaXRsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgeyBcclxuXHRtYW5pZmVzdDoge1xyXG5cdFx0bW9kZWxzOiB7XHJcblx0XHRcdGJvYXJkOiAnbW9kZWwvdGFibGUuZGFlJyxcclxuXHRcdFx0dG9waGF0OiAnbW9kZWwvdG9waGF0LmRhZScsXHJcblx0XHRcdHZpc29yY2FwOiAnbW9kZWwvdmlzb3JfY2FwLmRhZSdcclxuXHRcdH0sXHJcblx0XHR0ZXh0dXJlczoge1xyXG5cdFx0XHRib2FyZF9sYXJnZTogJ2ltZy9ib2FyZC1sYXJnZS1iYWtlZC5wbmcnLFxyXG5cdFx0XHRib2FyZF9tZWQ6ICdpbWcvYm9hcmQtbWVkaXVtLWJha2VkLnBuZycsXHJcblx0XHRcdGJvYXJkX3NtYWxsOiAnaW1nL2JvYXJkLXNtYWxsLWJha2VkLnBuZycsXHJcblx0XHRcdGNhcmRzOiAnaW1nL2NhcmRzLnBuZydcclxuXHRcdH1cclxuXHR9LFxyXG5cdGNhY2hlOiB7fVxyXG59XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCBBc3NldE1hbmFnZXIgZnJvbSAnLi9hc3NldHMnO1xyXG5cclxuXHQvLyBlbnVtIGNvbnN0YW50c1xyXG5sZXQgVHlwZXMgPSBPYmplY3QuZnJlZXplKHtcclxuXHRQT0xJQ1lfTElCRVJBTDogMCxcclxuXHRQT0xJQ1lfRkFTQ0lTVDogMSxcclxuXHRST0xFX0xJQkVSQUw6IDIsXHJcblx0Uk9MRV9GQVNDSVNUOiAzLFxyXG5cdFJPTEVfSElUTEVSOiA0LFxyXG5cdFBBUlRZX0xJQkVSQUw6IDUsXHJcblx0UEFSVFlfRkFTQ0lTVDogNixcclxuXHRKQTogNyxcclxuXHRORUlOOiA4LFxyXG5cdEJMQU5LOiA5XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gZGltc1RvVVYoe3NpZGUsIGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbX0pXHJcbntcclxuXHRpZihzaWRlKVxyXG5cdFx0cmV0dXJuIFtbXHJcblx0XHRcdG5ldyBUSFJFRS5WZWN0b3IyKHRvcCwgbGVmdCksXHJcblx0XHRcdG5ldyBUSFJFRS5WZWN0b3IyKGJvdHRvbSwgbGVmdCksXHJcblx0XHRcdG5ldyBUSFJFRS5WZWN0b3IyKHRvcCwgcmlnaHQpXHJcblx0XHRdLFtcclxuXHRcdFx0bmV3IFRIUkVFLlZlY3RvcjIoYm90dG9tLCBsZWZ0KSxcclxuXHRcdFx0bmV3IFRIUkVFLlZlY3RvcjIoYm90dG9tLCByaWdodCksXHJcblx0XHRcdG5ldyBUSFJFRS5WZWN0b3IyKHRvcCwgcmlnaHQpXHJcblx0XHRdXTtcclxuXHRlbHNlXHJcblx0XHRyZXR1cm4gW1tcclxuXHRcdFx0bmV3IFRIUkVFLlZlY3RvcjIobGVmdCwgdG9wKSxcclxuXHRcdFx0bmV3IFRIUkVFLlZlY3RvcjIobGVmdCwgYm90dG9tKSxcclxuXHRcdFx0bmV3IFRIUkVFLlZlY3RvcjIocmlnaHQsIHRvcClcclxuXHRcdF0sW1xyXG5cdFx0XHRuZXcgVEhSRUUuVmVjdG9yMihsZWZ0LCBib3R0b20pLFxyXG5cdFx0XHRuZXcgVEhSRUUuVmVjdG9yMihyaWdodCwgYm90dG9tKSxcclxuXHRcdFx0bmV3IFRIUkVFLlZlY3RvcjIocmlnaHQsIHRvcClcclxuXHRcdF1dO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRVVnModHlwZSlcclxue1xyXG5cdGxldCBkaW1zID0ge2xlZnQ6IDAsIHJpZ2h0OiAxLCBib3R0b206IDAsIHRvcDogMX07XHJcblxyXG5cdHN3aXRjaCh0eXBlKVxyXG5cdHtcclxuXHRjYXNlIFR5cGVzLlBPTElDWV9MSUJFUkFMOlxyXG5cdFx0ZGltcyA9IHtzaWRlOiB0cnVlLCBsZWZ0OiAwLjgzNCwgcmlnaHQ6IDAuOTk2LCB0b3A6IDAuNzU0LCBib3R0b206IDAuOTk3fTtcclxuXHRcdGJyZWFrO1xyXG5cdGNhc2UgVHlwZXMuUE9MSUNZX0ZBU0NJU1Q6XHJcblx0XHRkaW1zID0ge3NpZGU6IHRydWUsIGxlZnQ6IDAuNjYsIHJpZ2h0OiAwLjgyMiwgdG9wOiAwLjc1NCwgYm90dG9tOiAwLjk5Nn07XHJcblx0XHRicmVhaztcclxuXHRjYXNlIFR5cGVzLlJPTEVfTElCRVJBTDpcclxuXHRcdGRpbXMgPSB7bGVmdDogMC41MDUsIHJpZ2h0OiAwLjc0NiwgdG9wOiAwLjk5NiwgYm90dG9tOiAwLjY1fTtcclxuXHRcdGJyZWFrO1xyXG5cdGNhc2UgVHlwZXMuUk9MRV9GQVNDSVNUOlxyXG5cdFx0ZGltcyA9IHtsZWZ0OiAwLjUwNSwgcmlnaHQ6IDAuNzQ2LCB0b3A6IDAuNjQ1LCBib3R0b206IDAuM307XHJcblx0XHRicmVhaztcclxuXHRjYXNlIFR5cGVzLlJPTEVfSElUTEVSOlxyXG5cdFx0ZGltcyA9IHtsZWZ0OiAwLjc1NCwgcmlnaHQ6IDAuOTk2LCB0b3A6IDAuNjQ1LCBib3R0b206IDAuM307XHJcblx0XHRicmVhaztcclxuXHRjYXNlIFR5cGVzLlBBUlRZX0xJQkVSQUw6XHJcblx0XHRkaW1zID0ge2xlZnQ6IDAuMjU1LCByaWdodDogMC40OTUsIHRvcDogMC45OTYsIGJvdHRvbTogMC42NX07XHJcblx0XHRicmVhaztcclxuXHRjYXNlIFR5cGVzLlBBUlRZX0ZBU0NJU1Q6XHJcblx0XHRkaW1zID0ge2xlZnQ6IDAuMjU1LCByaWdodDogMC40OTUsIHRvcDogMC42NDUsIGJvdHRvbTogMC4zfTtcclxuXHRcdGJyZWFrO1xyXG5cdGNhc2UgVHlwZXMuSkE6XHJcblx0XHRkaW1zID0ge2xlZnQ6IDAuMDA1LCByaWdodDogMC4yNDQsIHRvcDogMC45OTIsIGJvdHRvbTogMC42NTN9O1xyXG5cdFx0YnJlYWs7XHJcblx0Y2FzZSBUeXBlcy5ORUlOOlxyXG5cdFx0ZGltcyA9IHtsZWZ0OiAwLjAwNiwgcmlnaHQ6IDAuMjQzLCB0b3A6IDAuNjQyLCBib3R0b206IDAuMzAyfTtcclxuXHRcdGJyZWFrO1xyXG5cdGNhc2UgVHlwZXMuQkxBTks6XHJcblx0ZGVmYXVsdDpcclxuXHRcdGRpbXMgPSB7c2lkZTogdHJ1ZSwgbGVmdDogMC4wMjIsIHJpZ2h0OiAuMDIyKzAuMjQ3LCB0b3A6IDAuMDIxLCBib3R0b206IC4wMjErMC4zNTQzfTtcclxuXHRcdGJyZWFrO1xyXG5cdH1cclxuXHJcblx0Y29uc29sZS5sb2coZGltcyk7XHJcblx0cmV0dXJuIGRpbXNUb1VWKGRpbXMpO1xyXG59XHJcblxyXG5cclxuY2xhc3MgQ2FyZCBleHRlbmRzIFRIUkVFLk9iamVjdDNEXHJcbntcclxuXHRjb25zdHJ1Y3Rvcih0eXBlID0gVHlwZXMuQkxBTkssIGRvdWJsZVNpZGVkID0gdHJ1ZSwgc2VjcmV0ID0gZmFsc2UpXHJcblx0e1xyXG5cdFx0c3VwZXIoKTtcclxuXHJcblx0XHQvLyBjcmVhdGUgdGhlIGNhcmQgZmFjZXNcclxuXHRcdGxldCBmcm9udCA9IG5ldyBUSFJFRS5NZXNoKFxyXG5cdFx0XHRuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSguMzU3NSwgLjUpLFxyXG5cdFx0XHRuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDogQXNzZXRNYW5hZ2VyLmNhY2hlLnRleHR1cmVzLmNhcmRzfSlcclxuXHRcdCk7XHJcblx0XHRsZXQgYmFjayA9IG5ldyBUSFJFRS5NZXNoKFxyXG5cdFx0XHRuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSguMzU3NSwgLjUpLFxyXG5cdFx0XHRuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDogQXNzZXRNYW5hZ2VyLmNhY2hlLnRleHR1cmVzLmNhcmRzfSlcclxuXHRcdCk7XHJcblx0XHRiYWNrLnBvc2l0aW9uLnNldCgwLjAwNSwgMCwgMCk7XHJcblx0XHRiYWNrLnJvdGF0ZVkoTWF0aC5QSSk7XHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBmYWNlcyB0byB0aGUgY29ycmVjdCBwYXJ0IG9mIHRoZSB0ZXh0dXJlXHJcblx0XHRmcm9udC5nZW9tZXRyeS5mYWNlVmVydGV4VXZzID0gW2dldFVWcyh0eXBlKV07XHJcblx0XHRiYWNrLmdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnMgPSBbZ2V0VVZzKCBkb3VibGVTaWRlZCA/IHR5cGUgOiBUeXBlcy5CTEFOSyApXTtcclxuXHJcblx0XHR3aW5kb3cudGVzdCA9IGZyb250O1xyXG5cclxuXHRcdHRoaXMuYWRkKGZyb250LCBiYWNrKTtcclxuXHR9XHJcblxyXG59XHJcblxyXG5jbGFzcyBMaWJlcmFsUG9saWN5Q2FyZCBleHRlbmRzIENhcmQge1xyXG5cdGNvbnN0cnVjdG9yKHNlY3JldCA9IGZhbHNlKXtcclxuXHRcdHN1cGVyKFR5cGVzLlBPTElDWV9MSUJFUkFMLCBmYWxzZSwgc2VjcmV0KTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEZhc2Npc3RQb2xpY3lDYXJkIGV4dGVuZHMgQ2FyZCB7XHJcblx0Y29uc3RydWN0b3Ioc2VjcmV0ID0gZmFsc2Upe1xyXG5cdFx0c3VwZXIoVHlwZXMuUE9MSUNZX0ZBU0NJU1QsIGZhbHNlLCBzZWNyZXQpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgTGliZXJhbFJvbGVDYXJkIGV4dGVuZHMgQ2FyZCB7XHJcblx0Y29uc3RydWN0b3Ioc2VjcmV0ID0gZmFsc2Upe1xyXG5cdFx0c3VwZXIoVHlwZXMuUk9MRV9MSUJFUkFMLCBmYWxzZSwgc2VjcmV0KTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEZhc2Npc3RSb2xlQ2FyZCBleHRlbmRzIENhcmQge1xyXG5cdGNvbnN0cnVjdG9yKHNlY3JldCA9IGZhbHNlKXtcclxuXHRcdHN1cGVyKFR5cGVzLlJPTEVfRkFTQ0lTVCwgZmFsc2UsIHNlY3JldCk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBIaXRsZXJSb2xlQ2FyZCBleHRlbmRzIENhcmQge1xyXG5cdGNvbnN0cnVjdG9yKHNlY3JldCA9IGZhbHNlKXtcclxuXHRcdHN1cGVyKFR5cGVzLlJPTEVfSElUTEVSLCBmYWxzZSwgc2VjcmV0KTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIExpYmVyYWxQYXJ0eUNhcmQgZXh0ZW5kcyBDYXJkIHtcclxuXHRjb25zdHJ1Y3RvcihzZWNyZXQgPSBmYWxzZSl7XHJcblx0XHRzdXBlcihUeXBlcy5QQVJUWV9MSUJFUkFMLCBmYWxzZSwgc2VjcmV0KTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEZhc2Npc3RQYXJ0eUNhcmQgZXh0ZW5kcyBDYXJkIHtcclxuXHRjb25zdHJ1Y3RvcihzZWNyZXQgPSBmYWxzZSl7XHJcblx0XHRzdXBlcihUeXBlcy5QQVJUWV9GQVNDSVNULCBmYWxzZSwgc2VjcmV0KTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEphQ2FyZCBleHRlbmRzIENhcmQge1xyXG5cdGNvbnN0cnVjdG9yKCl7XHJcblx0XHRzdXBlcihUeXBlcy5KQSwgZmFsc2UsIGZhbHNlKTtcclxuXHRcdHRoaXMuY2hpbGRyZW5bMF0ucm90YXRlWigtTWF0aC5QSS8yKTtcclxuXHRcdHRoaXMuY2hpbGRyZW5bMV0ucm90YXRlWigtTWF0aC5QSS8yKTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIE5laW5DYXJkIGV4dGVuZHMgQ2FyZCB7XHJcblx0Y29uc3RydWN0b3IoKXtcclxuXHRcdHN1cGVyKFR5cGVzLk5FSU4sIGZhbHNlLCBmYWxzZSk7XHJcblx0XHR0aGlzLmNoaWxkcmVuWzBdLnJvdGF0ZVooLU1hdGguUEkvMik7XHJcblx0XHR0aGlzLmNoaWxkcmVuWzFdLnJvdGF0ZVooLU1hdGguUEkvMik7XHJcblx0fVxyXG59XHJcblxyXG5cclxuZXhwb3J0IHtcclxuXHRDYXJkLCBUeXBlcyxcclxuXHRMaWJlcmFsUG9saWN5Q2FyZCwgRmFzY2lzdFBvbGljeUNhcmQsIExpYmVyYWxSb2xlQ2FyZCwgRmFzY2lzdFJvbGVDYXJkLFxyXG5cdEhpdGxlclJvbGVDYXJkLCBMaWJlcmFsUGFydHlDYXJkLCBGYXNjaXN0UGFydHlDYXJkLCBKYUNhcmQsIE5laW5DYXJkXHJcbn07XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCAqIGFzIENhcmRzIGZyb20gJy4vY2FyZCc7XHJcbmltcG9ydCBBc3NldE1hbmFnZXIgZnJvbSAnLi9hc3NldHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgLy9TZWNyZXRIaXRsZXJcclxue1xyXG5cdGFzc2V0czogQXNzZXRNYW5hZ2VyLm1hbmlmZXN0LFxyXG5cdGluaXRpYWxpemU6IChlbnYsIHJvb3QsIGFzc2V0cykgPT4ge1xyXG5cclxuXHRcdC8vIHNldCByb290IHRvIHRoZSB0YWJsZXRvcCAoMW0gZnJvbSBmbG9vcilcclxuXHRcdGxldCBoYWxmSGVpZ2h0ID0gZW52LmlubmVySGVpZ2h0LygyKmVudi5waXhlbHNQZXJNZXRlcik7XHJcblx0XHRyb290LnBvc2l0aW9uLnNldFkoLWhhbGZIZWlnaHQpO1xyXG5cclxuXHRcdC8vIHBvcHVsYXRlIHRoZSBzaGFyZWQgYXNzZXQgY2FjaGVcclxuXHRcdEFzc2V0TWFuYWdlci5jYWNoZSA9IGFzc2V0cztcclxuXHJcblx0XHQvLyBjcmVhdGUgdGhlIHRhYmxlXHJcblx0XHRsZXQgdGFibGUgPSBhc3NldHMubW9kZWxzLmJvYXJkO1xyXG5cdFx0bGV0IG1hdCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7IG1hcDogYXNzZXRzLnRleHR1cmVzLmJvYXJkX2xhcmdlIH0pO1xyXG5cdFx0dGFibGUuY2hpbGRyZW5bMF0ubWF0ZXJpYWwgPSBtYXQ7XHJcblx0XHR0YWJsZS5yb3RhdGlvbi5zZXQoLU1hdGguUEkvMiwgMCwgMCk7XHJcblx0XHR0YWJsZS5wb3NpdGlvbi5zZXQoMCwgMC43NSwgMCk7XHJcblx0XHRyb290LmFkZCh0YWJsZSk7XHJcblxyXG5cdFx0Ly8gY3JlYXRlIHRlc3QgY2FyZFxyXG5cdFx0bGV0IGMgPSBuZXcgQ2FyZHMuSGl0bGVyUm9sZUNhcmQoKTtcclxuXHRcdGMudHJhbnNsYXRlWSgxLjMpO1xyXG5cdFx0cm9vdC5hZGQoYyk7XHJcblxyXG5cdFx0bGV0IGhhdCA9IGFzc2V0cy5tb2RlbHMudG9waGF0O1xyXG5cdFx0aGF0LnBvc2l0aW9uLnNldCgwLjUsIDEuMywgMCk7XHJcblx0XHRoYXQucm90YXRpb24uc2V0KC1NYXRoLlBJLzIsIDAsIDApO1xyXG5cdFx0cm9vdC5hZGQoaGF0KTtcclxuXHRcdFxyXG5cdFx0bGV0IGhhdDIgPSBhc3NldHMubW9kZWxzLnZpc29yY2FwO1xyXG5cdFx0aGF0Mi5wb3NpdGlvbi5zZXQoLTAuNSwgMS4zLCAwKTtcclxuXHRcdGhhdDIucm90YXRpb24uc2V0KC1NYXRoLlBJLzIsIDAsIDApO1xyXG5cdFx0cm9vdC5hZGQoaGF0Mik7XHJcblx0fSxcclxuXHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJsZXQiLCJzdXBlciIsIkNhcmRzLkhpdGxlclJvbGVDYXJkIl0sIm1hcHBpbmdzIjoiOzs7QUFFQSxtQkFBZTtDQUNkLFFBQVEsRUFBRTtFQUNULE1BQU0sRUFBRTtHQUNQLEtBQUssRUFBRSxpQkFBaUI7R0FDeEIsTUFBTSxFQUFFLGtCQUFrQjtHQUMxQixRQUFRLEVBQUUscUJBQXFCO0dBQy9CO0VBQ0QsUUFBUSxFQUFFO0dBQ1QsV0FBVyxFQUFFLDJCQUEyQjtHQUN4QyxTQUFTLEVBQUUsNEJBQTRCO0dBQ3ZDLFdBQVcsRUFBRSwyQkFBMkI7R0FDeEMsS0FBSyxFQUFFLGVBQWU7R0FDdEI7RUFDRDtDQUNELEtBQUssRUFBRSxFQUFFO0NBQ1QsQ0FBQTs7O0FDWkRBLElBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Q0FDekIsY0FBYyxFQUFFLENBQUM7Q0FDakIsY0FBYyxFQUFFLENBQUM7Q0FDakIsWUFBWSxFQUFFLENBQUM7Q0FDZixZQUFZLEVBQUUsQ0FBQztDQUNmLFdBQVcsRUFBRSxDQUFDO0NBQ2QsYUFBYSxFQUFFLENBQUM7Q0FDaEIsYUFBYSxFQUFFLENBQUM7Q0FDaEIsRUFBRSxFQUFFLENBQUM7Q0FDTCxJQUFJLEVBQUUsQ0FBQztDQUNQLEtBQUssRUFBRSxDQUFDO0NBQ1IsQ0FBQyxDQUFDOztBQUVILFNBQVMsUUFBUSxDQUFDLEdBQUE7QUFDbEI7S0FEbUIsSUFBSSxZQUFFO0tB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
